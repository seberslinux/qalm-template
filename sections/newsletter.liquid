<section class="py-20 px-4 md:px-6 bg-gray-100">
  <div class="container mx-auto max-w-3xl text-center">
    <h2 class="text-3xl font-light mb-4">{{ section.settings.heading }}</h2>
    
    {% if section.settings.description != blank %}
      <p class="text-gray-600 mb-8">
        {{ section.settings.description }}
      </p>
    {% endif %}
    
    {%- form 'customer', id: 'newsletter-form', class: 'flex flex-col sm:flex-row gap-3 max-w-xl mx-auto' -%}
      {%- if form.errors -%}
        <div class="w-full text-red-500 text-left mb-4">
          {{ form.errors | default_errors }}
        </div>
      {%- endif -%}
      
      {%- if form.posted_successfully? -%}
        <div class="w-full text-green-500 mb-4">
          {{ 'general.newsletter_form.confirmation' | t }}
        </div>
      {%- else -%}
        <input type="hidden" name="contact[tags]" value="newsletter">
        <input type="email" 
               name="contact[email]" 
               id="Email" 
               placeholder="{{ section.settings.placeholder }}" 
               class="flex-grow px-4 py-3 border border-gray-300 focus:border-black focus:outline-none" 
               aria-label="Email address" 
               required>
        <button type="submit" 
                class="bg-black text-white px-6 py-3 text-sm uppercase tracking-wider hover:bg-gray-800 transition-colors" 
                name="commit">
          {{ section.settings.button_text }}
        </button>
      {%- endif -%}
    {%- endform -%}
    
    {% if section.settings.disclaimer_text != blank %}
      <p class="text-gray-500 text-sm mt-4">
        {{ section.settings.disclaimer_text }}
      </p>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Newsletter",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Join Our Community"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Subscribe to receive updates on new products, sensory-friendly tips, and exclusive offers."
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Subscribe"
    },
    {
      "type": "text",
      "id": "placeholder",
      "label": "Input Placeholder",
      "default": "Your email address"
    },
    {
      "type": "text",
      "id": "disclaimer_text",
      "label": "Disclaimer Text",
      "default": "By subscribing, you agree to our Privacy Policy and consent to receive updates from SENSORY."
    }
  ],
  "presets": [
    {
      "name": "Newsletter",
      "category": "Promotional"
    }
  ]
}
{% endschema %}